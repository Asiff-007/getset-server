<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>3d Model test</title>
  </head><link rel="import" href="">
  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.js"></script>
    <script type="module" src="https://cdn.rawgit.com/mrdoob/three.js/r92/examples/js/loaders/GLTFLoader.js"></script>
    <script type="module">

      import { GLTFLoader } from"https://threejs.org/examples/jsm/loaders/GLTFLoader.js";

      var scene = new THREE.Scene();
      var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.01, 1000);
      camera.position.set(0,3,15);
      var renderer = new THREE.WebGLRenderer();
      // scene.add(new THREE.AxesHelper(500));
      // renderer.setClearColor("0xe5e5e5");
      renderer.setSize(window.innerWidth, window.innerHeight);

      document.body.appendChild(renderer.domElement);

      // Resize on winndow Resize

      window.addEventListener('resize', () => {
        renderer.setSize(window.innerWidth,window.innerHeight);
        camera.aspect = windw.innerWidth / window.innerHeight;

        camera.updateProjectionMatrix();
      })


      var loader = new GLTFLoader();
      var obj;

      loader.load("thebox.gltf", function(gltf){
        obj = gltf.scene;
        var mixer = new THREE.AnimationMixer(obj);
        var action = mixer.clipAction( gltf.animations[0] );
        // console.log(gltf.animations);
        // var actionOpen = mixer.clipAction(clipOpen);
        action.play();

        scene.add(gltf.scene);

        gltf.animations.forEach( function ( action ) {
	      mixer.clipAction( action ).play();
} );


        // render();
      });


      scene.background = new THREE.Color(0xffffff);


      var light = new THREE.HemisphereLight(0xffffff, 0x000000, 5);
      var plight = new THREE.DirectionalLight(0xffffff, 2, 1000);
      var plight2 = new THREE.DirectionalLight(0xffedb6, 2, 1000  );

      plight.position.set(0,0,5);
      plight2.position.set(0,1,-1);

      scene.add(light);
      scene.add(plight2);
      scene.add(plight);


      // const sphereSize = 1;
      // const pointLightHelper = new THREE.PointLightHelper( plight, sphereSize );
      // scene.add( pointLightHelper );


      // mouse points

      var mx = 0;
      var my = 0;
      function saveMouse(event){
        mx = event.clientX;
        my = event.clientY;

      }


      document.onmousemove = saveMouse;
      var clock = new THREE. Clock();
      function animate(){
        requestAnimationFrame(animate);

        // obj.rotation.y = mx/500;
        // obj.rotation.x = my/500;

          // var dt = clock.getDelta();
        // mixer.update(dt);

        obj.rotation.y += 0.01;
        obj.position.z += 0.01;
        // camera.position.z -= 0.01;
        // camera.rotation.x -= 0.1;

        // console.log(camera.position.z);

        renderer.render(scene,camera);

      }
      animate();
      // document.onmousedown =       scene.remove( obj );

    </script>

  </body>
</html>
